{"version":3,"sources":["src/sw.js"],"names":["__CACHE_VER__","__CACHE_URLS__","self","addEventListener","evt","waitUntil","caches","open","then","cache","console","log","addAll","keys","keyList","Promise","all","map","key","delete","event","request","url","respondWith","match","res","fetch","responese","responeseClone","clone","put","catch","err"],"mappings":"AAAAA,aAAa,GAAG,gBAAhB;AACAC,cAAc,GAAG,CACb,GADa,EAEb;AACA;AACA;AACA;AACA;AACA;AACA,0EARa,EASb,6EATa,CAAjB;AAYAC,IAAI,CAACC,gBAAL,CAAsB,SAAtB,EAAiC,UAASC,GAAT,EAAc;AAC3CA,EAAAA,GAAG,CAACC,SAAJ,CACIC,MAAM,CAACC,IAAP,CAAYP,aAAZ,EAA2BQ,IAA3B,CAAgC,UAACC,KAAD,EAAW;AACvCC,IAAAA,OAAO,CAACC,GAAR,CAAY,0CAAZ;AACA,WAAOF,KAAK,CAACG,MAAN,CAAaX,cAAb,CAAP;AACH,GAHD,CADJ;AAMH,CAPD;AASAC,IAAI,CAACC,gBAAL,CAAsB,UAAtB,EAAkC,UAASC,GAAT,EAAc;AAC5CA,EAAAA,GAAG,CAACC,SAAJ,CACIC,MAAM,CAACO,IAAP,GAAcL,IAAd,CAAmB,UAACM,OAAD,EAAa;AAC5B,WAAOC,OAAO,CAACC,GAAR,CAAYF,OAAO,CAACG,GAAR,CAAY,UAACC,GAAD,EAAS;AACpCR,MAAAA,OAAO,CAACC,GAAR,CAAYO,GAAZ;;AACA,UAAIA,GAAG,KAAKlB,aAAZ,EAA2B;AACvBU,QAAAA,OAAO,CAACC,GAAR,CAAY,oCAAZ,EAAkDO,GAAlD;AACA,eAAOZ,MAAM,CAACa,MAAP,CAAcD,GAAd,CAAP;AACH;AACJ,KANkB,CAAZ,CAAP;AAOH,GARD,CADJ;AAWH,CAZD;AAcAhB,IAAI,CAACC,gBAAL,CAAsB,OAAtB,EAA+B,UAAUiB,KAAV,EAAiB;AAC5CV,EAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBS,KAAK,CAACC,OAAN,CAAcC,GAArC;AACAF,EAAAA,KAAK,CAACG,WAAN,CACIjB,MAAM,CAACkB,KAAP,CAAaJ,KAAK,CAACC,OAAnB,EAA4Bb,IAA5B,CAAiC,UAAAiB,GAAG,EAAI;AACpC,WAAOA,GAAG,IACNC,KAAK,CAACN,KAAK,CAACC,OAAP,CAAL,CACKb,IADL,CACU,UAAAmB,SAAS,EAAI;AACf,UAAMC,cAAc,GAAGD,SAAS,CAACE,KAAV,EAAvB;AACAvB,MAAAA,MAAM,CAACC,IAAP,CAAYP,aAAZ,EAA2BQ,IAA3B,CAAgC,UAAAC,KAAK,EAAI;AACrCA,QAAAA,KAAK,CAACqB,GAAN,CAAUV,KAAK,CAACC,OAAhB,EAAyBO,cAAzB;AACH,OAFD;AAGA,aAAOD,SAAP;AACH,KAPL,EAQKI,KARL,CAQW,UAAAC,GAAG,EAAI;AACVtB,MAAAA,OAAO,CAACC,GAAR,CAAYqB,GAAZ;AACH,KAVL,CADJ;AAYH,GAbD,CADJ;AAgBH,CAlBD","file":"sw.js","sourceRoot":"..","sourcesContent":["__CACHE_VER__ = \"fmt.wtdf.io_v1\"\n__CACHE_URLS__ = [\n    \"/\",\n    // \"/static/favicon.ico\",\n    // \"/static/manifest.json\",\n    // \"/static/joshua.css\",\n    // \"/static/index.css\",\n    // \"/static/joshua.js\",\n    // \"/static/index.js\",\n    \"https://fonts.loli.net/css?family=PT+Serif:400|PT+Serif:400&display=swap\",\n    \"https://fonts.loli.net/css?family=Source+Serif+Pro:400,600,700&display=swap\"\n]\n\nself.addEventListener('install', function(evt) {\n    evt.waitUntil(\n        caches.open(__CACHE_VER__).then((cache) => {\n            console.log('[ServiceWorker] Pre-caching offline page')\n            return cache.addAll(__CACHE_URLS__)\n        })\n    )\n})\n\nself.addEventListener('activate', function(evt) {\n    evt.waitUntil(\n        caches.keys().then((keyList) => {\n            return Promise.all(keyList.map((key) => {\n                console.log(key)\n                if (key !== __CACHE_VER__) {\n                    console.log('[ServiceWorker] Removing old cache', key)\n                    return caches.delete(key)\n                }\n            }))\n        })\n    )\n})\n\nself.addEventListener('fetch', function (event) {\n    console.log('[Fetch]', event.request.url)\n    event.respondWith(\n        caches.match(event.request).then(res => {\n            return res ||\n                fetch(event.request)\n                    .then(responese => {\n                        const responeseClone = responese.clone()\n                        caches.open(__CACHE_VER__).then(cache => {\n                            cache.put(event.request, responeseClone)\n                        })\n                        return responese\n                    })\n                    .catch(err => {\n                        console.log(err)\n                    })\n        })\n    )\n})\n"]}